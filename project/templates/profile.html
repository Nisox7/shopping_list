<!DOCTYPE html>
<script src='../static/js/toggle_theme.js'></script>

{% extends "base.html" %}

{% block content %}

<div class="container">

  <div class="main-body d-flex justify-content-center">
    <div class="col-md-8 w-100 p-3">
      <div class="card mb-3">
        <div class="card-body">
          <div class="d-flex flex-column align-items-center text-center">
            <!--<img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">-->
            <div class="mt-3">
              <h4>Profile</h4>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Name</h6>
            </div>
            <div class="col-sm-9">
              {{ name }}
            </div>
          </div>
          <hr>
          <div class="row">
            <div class="col-sm-3">
              <h6 class="mb-0">Email</h6>
            </div>
            <div class="col-sm-9">
              {{ email }}
            </div>
          </div>
          <hr>

          <div class="container text-center">
            <div class="row justify-content-center">
              <div class="col-sm-4">
                <a class="btn btn-warning" href="#" data-bs-toggle="modal" data-bs-target="#changeUserModal">Edit</a>
                <a class="btn btn-danger" href="#" data-bs-toggle="modal" data-bs-target="#changePasswordModal">Change
                  password</a>
                <a href="{{ url_for('auth.logout') }}"><input class="btn btn-secondary btn" id="buttons-back" type="submit"
                  value="Logout"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container text-center">
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  <br>
  <p class="mb-5" style="color:red;">{{ messages[0] }}</p>
  {% endif %}
  {% endwith %}
</div>

<div class="container text-center">
  <div class="row justify-content-center">
    <div class="col-sm-4">
      <a class="btn btn-outline-primary btn-md"
      href="{{ url_for('main.index') }}">Back home</a>
    </div>
  </div>
</div>

<div class="container">

  <!-- change password modal -->
  <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="changePasswordModalLabel">Change password</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="POST" action="/change_password">
          <div class="modal-body">
            <div class="row mb-3">
              <div class="col-sm-3">
                <h6 class="mb-0">Actual password</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input type="password" class="form-control" id="actual-password" name="actual-password"
                  placeholder="*******" required>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-sm-3">
                <h6 class="mb-0">New password</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input type="password" class="form-control" id="new-password" name="new-password" placeholder="*******"
                  required>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-sm-3">
                <h6 class="mb-0">Confirm password</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input type="password" class="form-control" id="confirm-password" name="confirm-password"
                  placeholder="*******" required>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-danger" id="buttons-change-password">Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="container">

  <!-- change user modal -->
  <div class="modal fade" id="changeUserModal" tabindex="-1" aria-labelledby="changeUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="changeUserModalLabel">Edit user</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="POST" action="/profile/edit">
          <div class="modal-body">
            <div class="row mb-3">
              <div class="col-sm-3">
                <h6 class="mb-0">New name</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input type="text" class="form-control" id="name" name="name" value="{{ name }}" required>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-sm-3">
                <h6 class="mb-0">New email</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input type="email" class="form-control" id="email" name="email" value="{{ email }}" required>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-info" id="buttons-change-user">Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>

<script src='../static/js/profile.js'></script>

{% endblock %}